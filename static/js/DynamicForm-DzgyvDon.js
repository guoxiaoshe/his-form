var d=(c,n,a)=>new Promise((r,i)=>{var s=o=>{try{u(a.next(o))}catch(e){i(e)}},g=o=>{try{u(a.throw(o))}catch(e){i(e)}},u=o=>o.done?r(o.value):Promise.resolve(o.value).then(s,g);u((a=a.apply(c,n)).next())});import{d as v,r as m,c as b,o as x,i as l,a as y,l as w,n as C,b as F,u as V,F as p,t as D,m as N}from"./index-X45oYXlX.js";import{l as k}from"./index-uMMFifQG.js";const B={class:"bg-white rounded-xl p-6 h-full overflow-y-auto flex flex-col gap-6"},I={class:"flex items-center justify-between"},J={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},S={class:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-800 overflow-x-auto"},z=v({__name:"DynamicForm",setup(c){const n=k(),a=m(),r=m(),i=m(null),s=m({});d(null,null,function*(){const e=yield n.getItem("test_form_config");e?(a.value=p.parseJson(e.options),r.value=p.parseJson(e.rule)):(a.value={},r.value=[])});const u=()=>d(null,null,function*(){const e=yield n.getItem("dynamic_form_data");e&&(s.value=e)}),o=e=>d(null,null,function*(){yield n.setItem("dynamic_form_data",e),N("表单数据已保存到本地存储",{type:"success"})});return(e,t)=>{const _=F("el-button");return x(),b("div",B,[l("header",I,[t[3]||(t[3]=l("h3",{class:"text-lg font-semibold text-gray-800"},"动态表单",-1)),y(_,{type:"primary",size:"default",onClick:u},{default:w(()=>t[2]||(t[2]=[C(" 载入上次结果 ",-1)])),_:1,__:[2]})]),l("section",J,[y(V(p),{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=f=>s.value=f),api:i.value,"onUpdate:api":t[1]||(t[1]=f=>i.value=f),rule:r.value,option:a.value,onSubmit:o},null,8,["modelValue","api","rule","option"])]),l("section",null,[t[4]||(t[4]=l("h4",{class:"text-base font-medium text-gray-600 mb-2"},"表单填写数据",-1)),l("pre",S,D(JSON.stringify(s.value,null,2)),1)])])}}});export{z as default};
