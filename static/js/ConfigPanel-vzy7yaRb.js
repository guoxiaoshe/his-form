var N=Object.defineProperty,E=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var _=(a,e,s)=>e in a?N(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,V=(a,e)=>{for(var s in e||(e={}))A.call(e,s)&&_(a,s,e[s]);if(F)for(var s of F(e))T.call(e,s)&&_(a,s,e[s]);return a},P=(a,e)=>E(a,S(e));import{_ as M,d as U,s as R,aZ as B,b as w,c as n,o as l,i as t,k as q,a4 as m,a5 as p,n as d,t as h,a6 as I,a as f,x as L,j as $,l as v}from"./index-X45oYXlX.js";const O=U({name:"ConfigPanel",props:{menus:Array},emits:["change"],data(){return{open:!1,dark:!1,init:!1,activeTheme:"blue",activeLocale:"zh-cn",theme:["blue","orange","green","purple","pink"],locale:[{value:"zh-cn",label:"中文"},{value:"en",label:"英文"}],constants:{},componentPermission:[],permission:[{label:"可拖动",value:"move"},{label:"可删除",value:"delete"},{label:"可复制",value:"copy"},{label:"可切换组件",value:"switchType"},{label:"显示编码",value:"name"},{label:"基础配置",value:"base"},{label:"组件配置",value:"props"},{label:"样式配置",value:"style"},{label:"事件配置",value:"event"},{label:"验证配置",value:"validate"}],feature:[{label:"板块开关",children:[{label:"左侧边栏",value:"showMenuBar",img:"https://view.form-create.com/img/hidden1.png"},{label:"多语言板块",value:"showLanguage",img:"https://view.form-create.com/img/version-550-2.png"},{label:"JSON预览板块",value:"showJsonPreview",img:"https://view.form-create.com/img/version-541-2.png"},{label:"多端切换按钮",value:"showDevice",img:"https://view.form-create.com/img/showDevice.png"},{label:"保存按钮",value:"showSaveBtn",img:"https://view.form-create.com/img/showSaveBtn.png"},{label:"预览按钮",value:"showPreviewBtn",img:"https://view.form-create.com/img/hidden3.png"},{label:"默认值按钮",value:"showInputData",img:"https://view.form-create.com/img/showInputData.png"},{label:"右侧配置栏",value:"showConfig",img:"https://view.form-create.com/img/showConfig.png"}]},{label:"功能开关",children:[{label:"快捷键",value:"hotKey",img:"https://view.form-create.com/img/hotkey.png"},{label:"复制组件时自动重置编码",value:"autoResetName",img:"https://view.form-create.com/img/showComponentName.png"},{label:"字段ID可编辑",value:"fieldReadonly",img:"https://view.form-create.com/img/custom-field.png"},{label:"组件编码可编辑",value:"nameReadonly",img:"https://pro.form-create.com/doc/img/custom-name.png"},{label:"隐藏组件操作按钮",value:"hiddenDragMenu",img:"https://view.form-create.com/img/hiddenDragMenu.png"},{label:"隐藏组件拖拽",value:"hiddenDragBtn",img:"https://view.form-create.com/img/hiddenDragBtn.png"},{label:"关闭页面时确认弹窗",value:"exitConfirm",img:"https://view.form-create.com/img/exitConfirm.png"}]},{label:"配置开关",children:[{label:"表单配置",value:"showFormConfig",img:"https://view.form-create.com/img/showFormConfig.png"},{label:"组件编码",value:"showComponentName",img:"https://view.form-create.com/img/showComponentName.png"},{label:"组件基础配置",value:"showBaseForm",img:"https://view.form-create.com/img/showBaseForm.png"},{label:"组件联动配置",value:"showControl",img:"https://view.form-create.com/img/showControl.png"},{label:"组件自定义属性按钮",value:"showCustomProps",img:"https://view.form-create.com/img/version-541-1.png"},{label:"组件属性配置",value:"showPropsForm",img:"https://view.form-create.com/img/showPropsForm.png"},{label:"组件样式配置",value:"showStyleForm",img:"https://view.form-create.com/img/showStyleForm.png"},{label:"组件事件配置",value:"showEventForm",img:"https://view.form-create.com/img/showEventForm.png"},{label:"组件验证配置",value:"showValidateForm",img:"https://view.form-create.com/img/showValidateForm.png"},{label:"只显示组件必填验证",value:"validateOnlyRequired",img:"https://pro.form-create.com/doc/img/validateOnlyRequired.png"}]}],activeFeature:{fieldReadonly:!1,showSaveBtn:!0},defaultFeature:{hotKey:!0,autoResetName:!0,fieldReadonly:!1,hiddenDragMenu:!1,hiddenDragBtn:!1,showAi:!0,showMenuBar:!0,showSaveBtn:!1,showGridLine:!0,showQuickLayout:!0,showPreviewBtn:!0,showPrintBtn:!0,showConfig:!0,showVariable:!0,showJsonPreview:!0,showCustomProps:!0,showPageManage:!0,showComponentName:!0,showBaseForm:!0,showControl:!0,showAdvancedForm:!0,showPropsForm:!0,showStyleForm:!0,showEventForm:!0,showValidateForm:!0,showFormConfig:!0,showTemplate:!0,showDevice:!0,showInputData:!0,showLanguage:!0,showLabelConfig:!0,exitConfirm:!0},defaultAuth:["move","delete","copy","switchType","name","base","advanced","props","slots","style","validate","event"]}},computed:{items(){const a=[];return this.menus.forEach(e=>{e.name!=="template"&&e.list&&e.list.forEach(s=>{a.push({value:s.name,label:s.label})})}),a},template(){const a=this.getConfig();return`<template>
    <fc-designer :config="config"${this.activeTheme==="blue"?"":' theme="'+this.activeTheme+'"'}${this.activeLocale==="zh-cn"?"":' :locale="'+this.activeLocale+'"'}></fc-designer>
</template>
<script setup>
    ${this.activeLocale==="zh-cn"?"":`import ${this.activeLocale} from '@form-create/designer/locale/${this.activeLocale}.js`}
    const config=ref(${B(a)})
<\/script>`}},watch:{template(){this.change()},dark(){this.change()},open(a){a&&!this.init&&(this.init=!0,this.menus.forEach(e=>{e.open=!0,e.list&&(e.checked=e.list.map(s=>s.name))}),this.addPermission(),this.activeFeature=P(V({},this.defaultFeature),{fieldReadonly:!1,showSaveBtn:!0}))}},methods:{change(){if(!this.open)return;const a=this.getConfig(!0);this.dark&&(a.dark=!0),this.activeTheme!=="blue"&&(a.theme=this.activeTheme),this.activeLocale!=="zh-cn"&&(a.locale=this.activeLocale),this.$emit("change",a)},addPermission(){this.componentPermission.push({tag:[],permission:this.defaultAuth})},getConfig(a){const e={};Object.keys(this.activeFeature).forEach(c=>{(a||this.activeFeature[c]!==this.defaultFeature[c])&&(e[c]=this.activeFeature[c])});const s=[];this.componentPermission.forEach(c=>{if(c.tag.length){const g={tag:c.tag,permission:{}};this.defaultAuth.forEach(u=>{c.permission.indexOf(u)===-1&&(g.permission[u]=!1)}),s.push(g)}}),s.length&&(e.componentPermission=s);const b=[],k=[];return this.menus.forEach(c=>{c.open===!1?b.push(c.name):c.list&&c.list.forEach(g=>{var u;((u=c.checked)==null?void 0:u.indexOf(g.name))===-1&&k.push(g.name)})}),(b.length||a)&&(e.hiddenMenu=b),(k.length||a)&&(e.hiddenItem=k),e},copy(){R(B(this.getConfig()))}}}),J={key:0,class:"designer-config-panel"},j={class:"panel-container"},x={class:"panel-header-group"},K={class:"panel-header"},G={class:"theme-selector"},Q=["onClick"],Z={class:"theme-name"},H={class:"feature-block"},W={class:"section-subtitle"},X={class:"setting-item"},Y={class:"item-title"},ee={href:"https://view.form-create.com/hidden-module",target:"_blank"},te=["src","alt"],ae={class:"setting-item"},oe={class:"section-subtitle"},se={class:"permission-block"},le={class:"permission-item-checkbox"},ie=["onClick"],ne={class:"preview-block"},re={class:"code-editor"},ce={class:"action-buttons"};function me(a,e,s,b,k,c){const g=w("el-popover"),u=w("el-switch"),y=w("el-checkbox"),C=w("el-checkbox-group"),D=w("el-option"),z=w("el-select");return a.open?(l(),n("div",J,[t("div",j,[t("div",x,[t("div",K,[e[4]||(e[4]=t("span",{class:"panel-title"},"设计器配置",-1)),t("i",{class:"fc-icon icon-add-circle collapse-icon",onClick:e[0]||(e[0]=o=>a.open=!1)})]),e[5]||(e[5]=t("span",{class:"panel-description"},"控制设计器中的功能模块的显示与隐藏。这些配置可以帮助您根据业务需求定制设计器的界面和功能。",-1)),e[6]||(e[6]=t("div",{class:"divider-line"},null,-1))]),e[10]||(e[10]=q('<div style="height:80px;" data-v-363a19b6></div><div class="section-header" data-v-363a19b6><span class="section-title" data-v-363a19b6>多语言设置 <a href="https://view.form-create.com/form-locale" target="_blank" data-v-363a19b6><i class="fc-icon icon-question" data-v-363a19b6></i></a></span></div>',2)),t("div",G,[(l(!0),n(m,null,p(a.locale,o=>(l(),n("div",{key:o.value,class:I(["theme-option",{active:o.value===a.activeLocale}]),onClick:i=>a.activeLocale=o.value},[t("span",Z,h(o.label),1)],10,Q))),128))]),e[11]||(e[11]=t("div",{class:"section-header"},[t("span",{class:"section-title"},[d("功能设置 "),t("a",{href:"https://view.form-create.com/hidden-item",target:"_blank"},[t("i",{class:"fc-icon icon-question"})])])],-1)),t("div",H,[(l(!0),n(m,null,p(a.feature,o=>(l(),n(m,{key:o.label},[t("div",W,h(o.label),1),(l(!0),n(m,null,p(o.children,i=>(l(),n("div",{key:i.value,class:"feature-item"},[t("div",X,[t("span",Y,[d(h(i.label)+" ",1),i.img?(l(),L(g,{key:0,placement:"top",width:350,trigger:"hover"},{reference:v(()=>e[7]||(e[7]=[t("i",{class:"fc-icon icon-question"},null,-1)])),default:v(()=>[t("a",ee,[t("img",{class:"item-img",src:i.img,alt:i.label},null,8,te)])]),_:2},1024)):$("",!0)]),f(u,{modelValue:a.activeFeature[i.value],"onUpdate:modelValue":r=>a.activeFeature[i.value]=r,size:"default"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))],64))),128))]),e[12]||(e[12]=t("div",{class:"section-header"},[t("span",{class:"section-title"},[d("菜单设置 "),t("a",{href:"https://view.form-create.com/hidden-item",target:"_blank"},[t("i",{class:"fc-icon icon-question"})])])],-1)),t("div",null,[(l(!0),n(m,null,p(a.menus,o=>(l(),n(m,{key:o.name},[t("div",ae,[t("span",oe,h(o.title),1),f(u,{modelValue:o.open,"onUpdate:modelValue":i=>o.open=i,size:"default"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[f(C,{modelValue:o.checked,"onUpdate:modelValue":i=>o.checked=i,class:"template-grid",disabled:!o.open},{default:v(()=>[(l(!0),n(m,null,p(o.list,i=>(l(),n("div",{key:i.name,class:"grid-item"},[f(y,{value:i.name,label:i.name},{default:v(()=>[d(h(i.label),1)]),_:2},1032,["value","label"])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])],64))),128))]),e[13]||(e[13]=t("div",{class:"section-header"},[t("span",{class:"section-title"},[d("操作权限 "),t("a",{href:"https://view.form-create.com/component-permission",target:"_blank"},[t("i",{class:"fc-icon icon-question"})])])],-1)),t("div",se,[(l(!0),n(m,null,p(a.componentPermission,(o,i)=>(l(),n("div",{key:o.id,class:"permission-item"},[f(z,{modelValue:o.tag,"onUpdate:modelValue":r=>o.tag=r,multiple:"",clearable:"",size:"default",placeholder:"请选择",style:{width:"100%"}},{default:v(()=>[(l(!0),n(m,null,p(a.items,r=>(l(),L(D,{key:r.value,value:r.value,label:r.label},{default:v(()=>[d(h(r.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),t("div",le,[f(C,{modelValue:o.permission,"onUpdate:modelValue":r=>o.permission=r,class:"template-grid"},{default:v(()=>[(l(!0),n(m,null,p(a.permission,r=>(l(),n("div",{key:r.value,class:"grid-item"},[f(y,{value:r.value,label:r.value},{default:v(()=>[d(h(r.label),1)]),_:2},1032,["value","label"])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),a.componentPermission.length>1?(l(),n("i",{key:0,class:"collapse-icon fc-icon icon-add-circle",onClick:r=>a.componentPermission.splice(i,1)},null,8,ie)):$("",!0)]))),128)),t("div",{class:"permission-add",onClick:e[1]||(e[1]=(...o)=>a.addPermission&&a.addPermission(...o))},e[8]||(e[8]=[t("i",{class:"fc-icon icon-add"},null,-1),d(" 添加权限 ",-1)]))]),e[14]||(e[14]=t("div",{class:"section-header"},[t("span",{class:"section-title"},"模板预览")],-1)),t("div",ne,[t("div",re,h(a.template),1)]),e[15]||(e[15]=t("div",{style:{height:"80px"}},null,-1)),t("div",ce,[t("div",{class:"action-button primary",onClick:e[2]||(e[2]=(...o)=>a.copy&&a.copy(...o))},e[9]||(e[9]=[t("span",{class:"button-text"},[t("i",{class:"fc-icon icon-group"}),d(" 复制配置")],-1)]))])])])):(l(),n("div",{key:1,class:"designer-config-float",onClick:e[3]||(e[3]=o=>a.open=!0)},e[16]||(e[16]=[t("svg",{fill:"#fff",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},[t("path",{d:"M899.2 379.2a439.68 439.68 0 0 0-19.52-47.04 137.28 137.28 0 0 0-187.84-187.84 439.68 439.68 0 0 0-47.04-19.52 137.28 137.28 0 0 0-265.6 0 439.68 439.68 0 0 0-47.04 19.52 137.28 137.28 0 0 0-187.84 187.84 439.68 439.68 0 0 0-19.52 47.04 137.28 137.28 0 0 0 0 265.6 439.68 439.68 0 0 0 19.52 47.04 137.28 137.28 0 0 0 187.84 187.84 439.68 439.68 0 0 0 47.04 19.52 137.28 137.28 0 0 0 265.6 0 439.68 439.68 0 0 0 47.04-19.52 137.28 137.28 0 0 0 187.84-187.84 439.68 439.68 0 0 0 19.52-47.04 137.28 137.28 0 0 0 0-265.6z m-33.6 186.88a41.6 41.6 0 0 0-38.72 32 314.24 314.24 0 0 1-32 77.76 41.92 41.92 0 0 0 5.12 48A54.08 54.08 0 0 1 723.84 800a41.92 41.92 0 0 0-49.28-5.76 314.24 314.24 0 0 1-77.76 32 41.6 41.6 0 0 0-32 38.72 54.08 54.08 0 0 1-108.16 0 41.6 41.6 0 0 0-32-38.72 314.24 314.24 0 0 1-77.76-32 43.84 43.84 0 0 0-20.8-5.44 42.24 42.24 0 0 0-28.48 11.2A54.08 54.08 0 0 1 224 723.84a41.92 41.92 0 0 0 5.76-49.28 314.24 314.24 0 0 1-32-77.76 41.6 41.6 0 0 0-38.72-32 54.08 54.08 0 0 1 0-108.16 41.6 41.6 0 0 0 38.72-32 314.24 314.24 0 0 1 32-77.76A41.92 41.92 0 0 0 224 300.16 54.08 54.08 0 0 1 300.16 224a41.92 41.92 0 0 0 49.28 5.76 314.24 314.24 0 0 1 77.76-32 41.6 41.6 0 0 0 32-38.72 54.08 54.08 0 0 1 108.16 0 41.6 41.6 0 0 0 32 38.72 314.24 314.24 0 0 1 77.76 32A41.92 41.92 0 0 0 723.84 224 54.08 54.08 0 0 1 800 300.16a41.92 41.92 0 0 0-5.76 49.28 314.24 314.24 0 0 1 32 77.76 41.6 41.6 0 0 0 38.72 32 54.08 54.08 0 0 1 0 108.16z"}),t("path",{d:"M512 310.4a201.6 201.6 0 1 0 201.6 201.6A201.92 201.92 0 0 0 512 310.4z m0 320a118.4 118.4 0 1 1 118.4-118.4 118.4 118.4 0 0 1-118.4 118.4z"})],-1)])))}const pe=M(O,[["render",me],["__scopeId","data-v-363a19b6"]]);export{pe as default};
